# **ReseToken 跨链项目：基于 CCIP 的高安全多链代币基础设施**

## **核心技术实现：**

1.  **CCIP 驱动的跨链代币传输：** 核心采用 Chainlink CCIP (跨链互操作性协议) 实现代币在不同区块链网络间的安全、可靠转移。
2.  **深度防御安全架构：** 构建多层（五级）跨链安全性保障体系，从协议层、合约层到操作层进行全方位防护，显著提升跨链操作的安全阈值。
3.  **灵活的合约部署与管理：**
    *   项目方可同时在多条链上部署核心合约：代币合约、代币池合约 (TokenPool - Burn/Mint 机制) 及金库合约。
    *   代币合约部署者自动成为默认的**代币管理员**，拥有对代币跨链操作权限（如授权、目标链设置等）的核心管理权。
    *   代币管理员可授权其他地址进行管理。
4.  **代币池 (TokenPool) 机制：**
    *   每个代币合约严格对应一个 TokenPool 合约，集中处理该代币的所有跨链核心逻辑（`burn`, `lock`, `mint`）。
    *   TokenPool 需明确配置**目标链**及其上对应的**目标代币合约地址**和**目标 TokenPool 合约地址**。
    *   **集成速率限制 (Rate Limiting)：** 开发者可配置关键风控参数：
        *   `跨链发送容量上限 (Capacity)`：单次或周期内允许跨链转移的代币最大数量。
        *   `补充率 (Refill Rate)`：超过容量上限后，额度恢复的速度。
5.  **跨链 Gas 费用机制：**
    *   默认使用源链上的 LINK 代币支付跨链交易费用。
    *   支持灵活配置，可选择使用源链的原生 Gas 代币（如 ETH、MATIC 等）支付费用。
6.  **清晰的跨链工作流：**
    `Sender` -> `CCIP Router` -> `源链 TokenPool (Burn/Lock)` -> `CCIP 消息网络` -> `目标链 TokenPool (Mint/Unlock)` -> `目标链 Token` -> `Receiver`

## **核心业务逻辑 (金库与代币经济)：**

1.  **质押与代币铸造：** 用户向金库合约质押 ETH，1:1 铸造获得等额 ReseToken。
2.  **动态利息计算：**
    *   质押后立即开始按**全局利率**，以**秒级精度**实时累积利息。
    *   利息计算在以下关键用户操作时触发并结算：
        *   新增质押 (`stake`)
        *   赎回代币 (`redeem`)
        *   代币转账 (`transfer`)
3.  **全局利率模型：**
    *   由代币合约所有者（或授权管理者）设定。
    *   关键特性：**利率仅可调低，不可升高**。
    *   **用户利率锚定：** 用户的利息累积**始终基于其最初质押时刻的全局利率**。这意味着**早期质押者锁定更高利率**，享有长期优势。
4.  **新增质押处理：** 用户进行新增质押时：
    *   系统首先**结算**其所有未领取的应计利息，并发放给用户。
    *   随后，本次新增的质押金额将与结算后的本金合并。
    *   合并后的总额作为新的本金，**按当前的全局利率**重新开始计息。
5.  **转账的利率继承：** 当用户转账 ReseToken 时：
    *   如果接收方地址**从未进行过质押**，则接收方在后续操作中计算利息时，**将继承发送方质押时的历史利率**。